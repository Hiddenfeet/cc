import{isDeFiConnectProvider as t}from"@deficonnect/utils";import{InstallExtensionModalProvider as e}from"@deficonnect/qrcode-modal";var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(t){var e={exports:{}};return t(e,e.exports),e.exports}var o,i,c=function(t){return t&&t.Math==Math&&t},u=c("object"==typeof globalThis&&globalThis)||c("object"==typeof window&&window)||c("object"==typeof self&&self)||c("object"==typeof n&&n)||function(){return this}()||Function("return this")(),a=function(t){try{return!!t()}catch(t){return!0}},f=!a(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),s=!a(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}),l=Function.prototype.call,d=s?l.bind(l):function(){return l.apply(l,arguments)},h={}.propertyIsEnumerable,p=Object.getOwnPropertyDescriptor,v={f:p&&!h.call({1:2},1)?function(t){var e=p(this,t);return!!e&&e.enumerable}:h},y=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},g=Function.prototype,m=g.call,b=s&&g.bind.bind(m,m),w=s?function(t){return t&&b(t)}:function(t){return t&&function(){return m.apply(t,arguments)}},O=w({}.toString),P=w("".slice),j=function(t){return P(O(t),8,-1)},S=Object,E=w("".split),T=a(function(){return!S("z").propertyIsEnumerable(0)})?function(t){return"String"==j(t)?E(t,""):S(t)}:S,C=TypeError,x=function(t){if(null==t)throw C("Can't call method on "+t);return t},k=function(t){return T(x(t))},R=function(t){return"function"==typeof t},_=function(t){return"object"==typeof t?null!==t:R(t)},A=function(t){return R(t)?t:void 0},I=function(t,e){return arguments.length<2?A(u[t]):u[t]&&u[t][e]},N=w({}.isPrototypeOf),M=I("navigator","userAgent")||"",F=u.process,D=u.Deno,L=F&&F.versions||D&&D.version,U=L&&L.v8;U&&(i=(o=U.split("."))[0]>0&&o[0]<4?1:+(o[0]+o[1])),!i&&M&&(!(o=M.match(/Edge\/(\d+)/))||o[1]>=74)&&(o=M.match(/Chrome\/(\d+)/))&&(i=+o[1]);var q=i,z=!!Object.getOwnPropertySymbols&&!a(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&q&&q<41}),G=z&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,W=Object,B=G?function(t){return"symbol"==typeof t}:function(t){var e=I("Symbol");return R(e)&&N(e.prototype,W(t))},V=String,$=function(t){try{return V(t)}catch(t){return"Object"}},J=TypeError,K=function(t){if(R(t))return t;throw J($(t)+" is not a function")},X=function(t,e){var n=t[e];return null==n?void 0:K(n)},H=TypeError,Y=Object.defineProperty,Q=function(t,e){try{Y(u,t,{value:e,configurable:!0,writable:!0})}catch(n){u[t]=e}return e},Z=u["__core-js_shared__"]||Q("__core-js_shared__",{}),tt=r(function(t){(t.exports=function(t,e){return Z[t]||(Z[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.24.1",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.24.1/LICENSE",source:"https://github.com/zloirock/core-js"})}),et=Object,nt=w({}.hasOwnProperty),rt=Object.hasOwn||function(t,e){return nt(et(x(t)),e)},ot=0,it=Math.random(),ct=w(1..toString),ut=function(t){return"Symbol("+(void 0===t?"":t)+")_"+ct(++ot+it,36)},at=tt("wks"),ft=u.Symbol,st=ft&&ft.for,lt=G?ft:ft&&ft.withoutSetter||ut,dt=function(t){if(!rt(at,t)||!z&&"string"!=typeof at[t]){var e="Symbol."+t;at[t]=z&&rt(ft,t)?ft[t]:G&&st?st(e):lt(e)}return at[t]},ht=TypeError,pt=dt("toPrimitive"),vt=function(t){var e=function(t,e){if(!_(t)||B(t))return t;var n,r=X(t,pt);if(r){if(void 0===e&&(e="default"),n=d(r,t,e),!_(n)||B(n))return n;throw ht("Can't convert object to primitive value")}return void 0===e&&(e="number"),function(t,e){var n,r;if("string"===e&&R(n=t.toString)&&!_(r=d(n,t)))return r;if(R(n=t.valueOf)&&!_(r=d(n,t)))return r;if("string"!==e&&R(n=t.toString)&&!_(r=d(n,t)))return r;throw H("Can't convert object to primitive value")}(t,e)}(t,"string");return B(e)?e:e+""},yt=u.document,gt=_(yt)&&_(yt.createElement),mt=function(t){return gt?yt.createElement(t):{}},bt=!f&&!a(function(){return 7!=Object.defineProperty(mt("div"),"a",{get:function(){return 7}}).a}),wt=Object.getOwnPropertyDescriptor,Ot={f:f?wt:function(t,e){if(t=k(t),e=vt(e),bt)try{return wt(t,e)}catch(t){}if(rt(t,e))return y(!d(v.f,t,e),t[e])}},Pt=f&&a(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),jt=String,St=TypeError,Et=function(t){if(_(t))return t;throw St(jt(t)+" is not an object")},Tt=TypeError,Ct=Object.defineProperty,xt=Object.getOwnPropertyDescriptor,kt={f:f?Pt?function(t,e,n){if(Et(t),e=vt(e),Et(n),"function"==typeof t&&"prototype"===e&&"value"in n&&"writable"in n&&!n.writable){var r=xt(t,e);r&&r.writable&&(t[e]=n.value,n={configurable:"configurable"in n?n.configurable:r.configurable,enumerable:"enumerable"in n?n.enumerable:r.enumerable,writable:!1})}return Ct(t,e,n)}:Ct:function(t,e,n){if(Et(t),e=vt(e),Et(n),bt)try{return Ct(t,e,n)}catch(t){}if("get"in n||"set"in n)throw Tt("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},Rt=f?function(t,e,n){return kt.f(t,e,y(1,n))}:function(t,e,n){return t[e]=n,t},_t=Function.prototype,At=f&&Object.getOwnPropertyDescriptor,It=rt(_t,"name"),Nt={EXISTS:It,PROPER:It&&"something"===function(){}.name,CONFIGURABLE:It&&(!f||f&&At(_t,"name").configurable)},Mt=w(Function.toString);R(Z.inspectSource)||(Z.inspectSource=function(t){return Mt(t)});var Ft,Dt,Lt,Ut=Z.inspectSource,qt=u.WeakMap,zt=R(qt)&&/native code/.test(Ut(qt)),Gt=tt("keys"),Wt=function(t){return Gt[t]||(Gt[t]=ut(t))},Bt={},Vt=u.TypeError;if(zt||Z.state){var $t=Z.state||(Z.state=new(0,u.WeakMap)),Jt=w($t.get),Kt=w($t.has),Xt=w($t.set);Ft=function(t,e){if(Kt($t,t))throw new Vt("Object already initialized");return e.facade=t,Xt($t,t,e),e},Dt=function(t){return Jt($t,t)||{}},Lt=function(t){return Kt($t,t)}}else{var Ht=Wt("state");Bt[Ht]=!0,Ft=function(t,e){if(rt(t,Ht))throw new Vt("Object already initialized");return e.facade=t,Rt(t,Ht,e),e},Dt=function(t){return rt(t,Ht)?t[Ht]:{}},Lt=function(t){return rt(t,Ht)}}var Yt={set:Ft,get:Dt,has:Lt,enforce:function(t){return Lt(t)?Dt(t):Ft(t,{})},getterFor:function(t){return function(e){var n;if(!_(e)||(n=Dt(e)).type!==t)throw Vt("Incompatible receiver, "+t+" required");return n}}},Qt=r(function(t){var e=Nt.CONFIGURABLE,n=Yt.enforce,r=Yt.get,o=Object.defineProperty,i=f&&!a(function(){return 8!==o(function(){},"length",{value:8}).length}),c=String(String).split("String"),u=t.exports=function(t,r,u){"Symbol("===String(r).slice(0,7)&&(r="["+String(r).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),u&&u.getter&&(r="get "+r),u&&u.setter&&(r="set "+r),(!rt(t,"name")||e&&t.name!==r)&&(f?o(t,"name",{value:r,configurable:!0}):t.name=r),i&&u&&rt(u,"arity")&&t.length!==u.arity&&o(t,"length",{value:u.arity});try{u&&rt(u,"constructor")&&u.constructor?f&&o(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var a=n(t);return rt(a,"source")||(a.source=c.join("string"==typeof r?r:"")),t};Function.prototype.toString=u(function(){return R(this)&&r(this).source||Ut(this)},"toString")}),Zt=function(t,e,n,r){r||(r={});var o=r.enumerable,i=void 0!==r.name?r.name:e;if(R(n)&&Qt(n,i,r),r.global)o?t[e]=n:Q(e,n);else{try{r.unsafe?t[e]&&(o=!0):delete t[e]}catch(t){}o?t[e]=n:kt.f(t,e,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return t},te=Math.ceil,ee=Math.floor,ne=Math.trunc||function(t){var e=+t;return(e>0?ee:te)(e)},re=function(t){var e=+t;return e!=e||0===e?0:ne(e)},oe=Math.max,ie=Math.min,ce=Math.min,ue=function(t){return(e=t.length)>0?ce(re(e),9007199254740991):0;var e},ae=function(t){return function(e,n,r){var o,i=k(e),c=ue(i),u=function(t,e){var n=re(t);return n<0?oe(n+e,0):ie(n,e)}(r,c);if(t&&n!=n){for(;c>u;)if((o=i[u++])!=o)return!0}else for(;c>u;u++)if((t||u in i)&&i[u]===n)return t||u||0;return!t&&-1}},fe={includes:ae(!0),indexOf:ae(!1)},se=fe.indexOf,le=w([].push),de=function(t,e){var n,r=k(t),o=0,i=[];for(n in r)!rt(Bt,n)&&rt(r,n)&&le(i,n);for(;e.length>o;)rt(r,n=e[o++])&&(~se(i,n)||le(i,n));return i},he=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],pe=he.concat("length","prototype"),ve={f:Object.getOwnPropertyNames||function(t){return de(t,pe)}},ye={f:Object.getOwnPropertySymbols},ge=w([].concat),me=I("Reflect","ownKeys")||function(t){var e=ve.f(Et(t)),n=ye.f;return n?ge(e,n(t)):e},be=function(t,e,n){for(var r=me(e),o=kt.f,i=Ot.f,c=0;c<r.length;c++){var u=r[c];rt(t,u)||n&&rt(n,u)||o(t,u,i(e,u))}},we=/#|\.prototype\./,Oe=function(t,e){var n=je[Pe(t)];return n==Ee||n!=Se&&(R(e)?a(e):!!e)},Pe=Oe.normalize=function(t){return String(t).replace(we,".").toLowerCase()},je=Oe.data={},Se=Oe.NATIVE="N",Ee=Oe.POLYFILL="P",Te=Oe,Ce=Ot.f,xe=function(t,e){var n,r,o,i,c,a=t.target,f=t.global,s=t.stat;if(n=f?u:s?u[a]||Q(a,{}):(u[a]||{}).prototype)for(r in e){if(i=e[r],o=t.dontCallGetSet?(c=Ce(n,r))&&c.value:n[r],!Te(f?r:a+(s?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;be(i,o)}(t.sham||o&&o.sham)&&Rt(i,"sham",!0),Zt(n,r,i,t)}},ke="process"==j(u.process),Re=String,_e=TypeError,Ae=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=w(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return Et(n),function(t){if("object"==typeof t||R(t))return t;throw _e("Can't set "+Re(t)+" as a prototype")}(r),e?t(n,r):n.__proto__=r,n}}():void 0),Ie=kt.f,Ne=dt("toStringTag"),Me=dt("species"),Fe=TypeError,De={};De[dt("toStringTag")]="z";var Le="[object z]"===String(De),Ue=dt("toStringTag"),qe=Object,ze="Arguments"==j(function(){return arguments}()),Ge=Le?j:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=qe(t),Ue))?n:ze?j(e):"Object"==(r=j(e))&&R(e.callee)?"Arguments":r},We=function(){},Be=[],Ve=I("Reflect","construct"),$e=/^\s*(?:class|function)\b/,Je=w($e.exec),Ke=!$e.exec(We),Xe=function(t){if(!R(t))return!1;try{return Ve(We,Be,t),!0}catch(t){return!1}},He=function(t){if(!R(t))return!1;switch(Ge(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Ke||!!Je($e,Ut(t))}catch(t){return!0}};He.sham=!0;var Ye,Qe,Ze,tn,en=!Ve||a(function(){var t;return Xe(Xe.call)||!Xe(Object)||!Xe(function(){t=!0})||t})?He:Xe,nn=TypeError,rn=dt("species"),on=Function.prototype,cn=on.apply,un=on.call,an="object"==typeof Reflect&&Reflect.apply||(s?un.bind(cn):function(){return un.apply(cn,arguments)}),fn=w(w.bind),sn=function(t,e){return K(t),void 0===e?t:s?fn(t,e):function(){return t.apply(e,arguments)}},ln=I("document","documentElement"),dn=w([].slice),hn=TypeError,pn=function(t,e){if(t<e)throw hn("Not enough arguments");return t},vn=/(?:ipad|iphone|ipod).*applewebkit/i.test(M),yn=u.setImmediate,gn=u.clearImmediate,mn=u.process,bn=u.Dispatch,wn=u.Function,On=u.MessageChannel,Pn=u.String,jn=0,Sn={};try{Ye=u.location}catch(t){}var En=function(t){if(rt(Sn,t)){var e=Sn[t];delete Sn[t],e()}},Tn=function(t){return function(){En(t)}},Cn=function(t){En(t.data)},xn=function(t){u.postMessage(Pn(t),Ye.protocol+"//"+Ye.host)};yn&&gn||(yn=function(t){pn(arguments.length,1);var e=R(t)?t:wn(t),n=dn(arguments,1);return Sn[++jn]=function(){an(e,void 0,n)},Qe(jn),jn},gn=function(t){delete Sn[t]},ke?Qe=function(t){mn.nextTick(Tn(t))}:bn&&bn.now?Qe=function(t){bn.now(Tn(t))}:On&&!vn?(tn=(Ze=new On).port2,Ze.port1.onmessage=Cn,Qe=sn(tn.postMessage,tn)):u.addEventListener&&R(u.postMessage)&&!u.importScripts&&Ye&&"file:"!==Ye.protocol&&!a(xn)?(Qe=xn,u.addEventListener("message",Cn,!1)):Qe="onreadystatechange"in mt("script")?function(t){ln.appendChild(mt("script")).onreadystatechange=function(){ln.removeChild(this),En(t)}}:function(t){setTimeout(Tn(t),0)});var kn,Rn,_n,An,In,Nn,Mn,Fn,Dn={set:yn,clear:gn},Ln=/ipad|iphone|ipod/i.test(M)&&void 0!==u.Pebble,Un=/web0s(?!.*chrome)/i.test(M),qn=Dn.set,zn=u.MutationObserver||u.WebKitMutationObserver,Gn=u.document,Wn=u.process,Bn=u.Promise,Vn=(0,Ot.f)(u,"queueMicrotask"),$n=Vn&&Vn.value;$n||(kn=function(){var t,e;for(ke&&(t=Wn.domain)&&t.exit();Rn;){e=Rn.fn,Rn=Rn.next;try{e()}catch(t){throw Rn?An():_n=void 0,t}}_n=void 0,t&&t.enter()},vn||ke||Un||!zn||!Gn?!Ln&&Bn&&Bn.resolve?((Mn=Bn.resolve(void 0)).constructor=Bn,Fn=sn(Mn.then,Mn),An=function(){Fn(kn)}):ke?An=function(){Wn.nextTick(kn)}:(qn=sn(qn,u),An=function(){qn(kn)}):(In=!0,Nn=Gn.createTextNode(""),new zn(kn).observe(Nn,{characterData:!0}),An=function(){Nn.data=In=!In}));var Jn=$n||function(t){var e={fn:t,next:void 0};_n&&(_n.next=e),Rn||(Rn=e,An()),_n=e},Kn=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Xn=function(){this.head=null,this.tail=null};Xn.prototype={add:function(t){var e={item:t,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}};var Hn,Yn,Qn,Zn,tr,er=Xn,nr=u.Promise,rr="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,or=!rr&&!ke&&"object"==typeof window&&"object"==typeof document,ir=dt("species"),cr=!1,ur=R(u.PromiseRejectionEvent),ar=Te("Promise",function(){var t=Ut(nr),e=t!==String(nr);if(!e&&66===q)return!0;if(!q||q<51||!/native code/.test(t)){var n=new nr(function(t){t(1)}),r=function(t){t(function(){},function(){})};if((n.constructor={})[ir]=r,!(cr=n.then(function(){})instanceof r))return!0}return!e&&(or||rr)&&!ur}),fr={CONSTRUCTOR:ar,REJECTION_EVENT:ur,SUBCLASSING:cr},sr=function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=K(e),this.reject=K(n)},lr={f:function(t){return new sr(t)}},dr=Dn.set,hr=fr.CONSTRUCTOR,pr=fr.REJECTION_EVENT,vr=fr.SUBCLASSING,yr=Yt.getterFor("Promise"),gr=Yt.set,mr=nr&&nr.prototype,br=nr,wr=mr,Or=u.TypeError,Pr=u.document,jr=u.process,Sr=lr.f,Er=Sr,Tr=!!(Pr&&Pr.createEvent&&u.dispatchEvent),Cr=function(t){var e;return!(!_(t)||!R(e=t.then))&&e},xr=function(t,e){var n,r,o,i=e.value,c=1==e.state,u=c?t.ok:t.fail,a=t.resolve,f=t.reject,s=t.domain;try{u?(c||(2===e.rejection&&Ir(e),e.rejection=1),!0===u?n=i:(s&&s.enter(),n=u(i),s&&(s.exit(),o=!0)),n===t.promise?f(Or("Promise-chain cycle")):(r=Cr(n))?d(r,n,a,f):a(n)):f(i)}catch(t){s&&!o&&s.exit(),f(t)}},kr=function(t,e){t.notified||(t.notified=!0,Jn(function(){for(var n,r=t.reactions;n=r.get();)xr(n,t);t.notified=!1,e&&!t.rejection&&_r(t)}))},Rr=function(t,e,n){var r,o;Tr?((r=Pr.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),u.dispatchEvent(r)):r={promise:e,reason:n},!pr&&(o=u["on"+t])?o(r):"unhandledrejection"===t&&function(t,e){var n=u.console;n&&n.error&&(1==arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},_r=function(t){d(dr,u,function(){var e,n=t.facade,r=t.value;if(Ar(t)&&(e=Kn(function(){ke?jr.emit("unhandledRejection",r,n):Rr("unhandledrejection",n,r)}),t.rejection=ke||Ar(t)?2:1,e.error))throw e.value})},Ar=function(t){return 1!==t.rejection&&!t.parent},Ir=function(t){d(dr,u,function(){var e=t.facade;ke?jr.emit("rejectionHandled",e):Rr("rejectionhandled",e,t.value)})},Nr=function(t,e,n){return function(r){t(e,r,n)}},Mr=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,kr(t,!0))},Fr=function t(e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===n)throw Or("Promise can't be resolved itself");var o=Cr(n);o?Jn(function(){var r={done:!1};try{d(o,n,Nr(t,r,e),Nr(Mr,r,e))}catch(t){Mr(r,t,e)}}):(e.value=n,e.state=1,kr(e,!1))}catch(t){Mr({done:!1},t,e)}}};if(hr&&(br=function(t){!function(t,e){if(N(wr,t))return t;throw Fe("Incorrect invocation")}(this),K(t),d(Hn,this);var e=yr(this);try{t(Nr(Fr,e),Nr(Mr,e))}catch(t){Mr(e,t)}},(Hn=function(t){gr(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new er,rejection:!1,state:0,value:void 0})}).prototype=Zt(wr=br.prototype,"then",function(t,e){var n,r,o,i=yr(this),c=Sr((n=br,void 0===(o=Et(this).constructor)||null==(r=Et(o)[rn])?n:function(t){if(en(t))return t;throw nn($(t)+" is not a constructor")}(r)));return i.parent=!0,c.ok=!R(t)||t,c.fail=R(e)&&e,c.domain=ke?jr.domain:void 0,0==i.state?i.reactions.add(c):Jn(function(){xr(c,i)}),c.promise}),Yn=function(){var t=new Hn,e=yr(t);this.promise=t,this.resolve=Nr(Fr,e),this.reject=Nr(Mr,e)},lr.f=Sr=function(t){return t===br||void 0===t?new Yn(t):Er(t)},R(nr)&&mr!==Object.prototype)){Qn=mr.then,vr||Zt(mr,"then",function(t,e){var n=this;return new br(function(t,e){d(Qn,n,t,e)}).then(t,e)},{unsafe:!0});try{delete mr.constructor}catch(t){}Ae&&Ae(mr,wr)}xe({global:!0,constructor:!0,wrap:!0,forced:hr},{Promise:br}),(Zn=br)&&(Zn=Zn.prototype),Zn&&!rt(Zn,Ne)&&Ie(Zn,Ne,{configurable:!0,value:"Promise"}),tr=I("Promise"),f&&tr&&!tr[Me]&&(0,kt.f)(tr,Me,{configurable:!0,get:function(){return this}});var Dr={},Lr=dt("iterator"),Ur=Array.prototype,qr=dt("iterator"),zr=function(t){if(null!=t)return X(t,qr)||X(t,"@@iterator")||Dr[Ge(t)]},Gr=TypeError,Wr=function(t,e,n){var r,o;Et(t);try{if(!(r=X(t,"return"))){if("throw"===e)throw n;return n}r=d(r,t)}catch(t){o=!0,r=t}if("throw"===e)throw n;if(o)throw r;return Et(r),n},Br=TypeError,Vr=function(t,e){this.stopped=t,this.result=e},$r=Vr.prototype,Jr=function(t,e,n){var r,o,i,c,u,a,f,s,l=!(!n||!n.AS_ENTRIES),h=!(!n||!n.IS_RECORD),p=!(!n||!n.IS_ITERATOR),v=!(!n||!n.INTERRUPTED),y=sn(e,n&&n.that),g=function(t){return r&&Wr(r,"normal",t),new Vr(!0,t)},m=function(t){return l?(Et(t),v?y(t[0],t[1],g):y(t[0],t[1])):v?y(t,g):y(t)};if(h)r=t.iterator;else if(p)r=t;else{if(!(o=zr(t)))throw Br($(t)+" is not iterable");if(void 0!==(s=o)&&(Dr.Array===s||Ur[Lr]===s)){for(i=0,c=ue(t);c>i;i++)if((u=m(t[i]))&&N($r,u))return u;return new Vr(!1)}r=function(t,e){var n=arguments.length<2?zr(t):e;if(K(n))return Et(d(n,t));throw Gr($(t)+" is not iterable")}(t,o)}for(a=h?t.next:r.next;!(f=d(a,r)).done;){try{u=m(f.value)}catch(t){Wr(r,"throw",t)}if("object"==typeof u&&u&&N($r,u))return u}return new Vr(!1)},Kr=dt("iterator"),Xr=!1;try{var Hr=0,Yr={next:function(){return{done:!!Hr++}},return:function(){Xr=!0}};Yr[Kr]=function(){return this},Array.from(Yr,function(){throw 2})}catch(t){}var Qr=fr.CONSTRUCTOR||!function(t,e){if(!Xr)return!1;var n=!1;try{var r={};r[Kr]=function(){return{next:function(){return{done:n=!0}}}},nr.all(r).then(void 0,function(){})}catch(t){}return n}();xe({target:"Promise",stat:!0,forced:Qr},{all:function(t){var e=this,n=lr.f(e),r=n.resolve,o=n.reject,i=Kn(function(){var n=K(e.resolve),i=[],c=0,u=1;Jr(t,function(t){var a=c++,f=!1;u++,d(n,e,t).then(function(t){f||(f=!0,i[a]=t,--u||r(i))},o)}),--u||r(i)});return i.error&&o(i.value),n.promise}});var Zr=nr&&nr.prototype;if(xe({target:"Promise",proto:!0,forced:fr.CONSTRUCTOR,real:!0},{catch:function(t){return this.then(void 0,t)}}),R(nr)){var to=I("Promise").prototype.catch;Zr.catch!==to&&Zt(Zr,"catch",to,{unsafe:!0})}xe({target:"Promise",stat:!0,forced:Qr},{race:function(t){var e=this,n=lr.f(e),r=n.reject,o=Kn(function(){var o=K(e.resolve);Jr(t,function(t){d(o,e,t).then(n.resolve,r)})});return o.error&&r(o.value),n.promise}}),xe({target:"Promise",stat:!0,forced:fr.CONSTRUCTOR},{reject:function(t){var e=lr.f(this);return d(e.reject,void 0,t),e.promise}}),xe({target:"Promise",stat:!0,forced:fr.CONSTRUCTOR},{resolve:function(t){return function(t,e){if(Et(t),_(e)&&e.constructor===t)return e;var n=lr.f(t);return(0,n.resolve)(e),n.promise}(this,t)}});var eo,no=Object.keys||function(t){return de(t,he)},ro=f&&!Pt?Object.defineProperties:function(t,e){Et(t);for(var n,r=k(e),o=no(e),i=o.length,c=0;i>c;)kt.f(t,n=o[c++],r[n]);return t},oo={f:ro},io=Wt("IE_PROTO"),co=function(){},uo=function(t){return"<script>"+t+"<\/script>"},ao=function(t){t.write(uo("")),t.close();var e=t.parentWindow.Object;return t=null,e},fo=function(){try{eo=new ActiveXObject("htmlfile")}catch(t){}var t,e;fo="undefined"!=typeof document?document.domain&&eo?ao(eo):((e=mt("iframe")).style.display="none",ln.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(uo("document.F=Object")),t.close(),t.F):ao(eo);for(var n=he.length;n--;)delete fo.prototype[he[n]];return fo()};Bt[io]=!0;var so=Object.create||function(t,e){var n;return null!==t?(co.prototype=Et(t),n=new co,co.prototype=null,n[io]=t):n=fo(),void 0===e?n:oo.f(n,e)},lo=kt.f,ho=dt("unscopables"),po=Array.prototype;null==po[ho]&&lo(po,ho,{configurable:!0,value:so(null)});var vo=fe.includes;xe({target:"Array",proto:!0,forced:a(function(){return!Array(1).includes()})},{includes:function(t){return vo(this,t,arguments.length>1?arguments[1]:void 0)}}),po[ho].includes=!0;var yo=dt("match"),go=TypeError,mo=function(t){if(function(t){var e;return _(t)&&(void 0!==(e=t[yo])?!!e:"RegExp"==j(t))}(t))throw go("The method doesn't accept regular expressions");return t},bo=String,wo=function(t){if("Symbol"===Ge(t))throw TypeError("Cannot convert a Symbol value to a string");return bo(t)},Oo=dt("match"),Po=w("".indexOf);xe({target:"String",proto:!0,forced:!function(t){var e=/./;try{"/./".includes(e)}catch(t){try{return e[Oo]=!1,"/./".includes(e)}catch(t){}}return!1}()},{includes:function(t){return!!~Po(wo(x(this)),wo(mo(t)),arguments.length>1?arguments[1]:void 0)}});class jo extends Error{constructor(t,e){super(),this.code=void 0,this.message=void 0,this.code=t,this.message=e}toString(){return`${this.message} (${this.code})`}}class So{constructor(t){this.networkConfig=void 0,this.isDeficonnectProvider=!0,this.deficonnectProvider=void 0,this.eventCallbacks=[],this.installExtensionModal=void 0,this.networkConfig=t,this.installExtensionModal=new e}on(t,e){var n;return this.eventCallbacks.push({event:t,listener:e}),null!=(n=this.deficonnectProvider)&&n.on&&this.deficonnectProvider.on(t,e),this}removeListener(t,e){var n;return this.eventCallbacks=this.eventCallbacks.filter(n=>n.event===t&&n.listener===e),null!=(n=this.deficonnectProvider)&&n.removeListener&&this.deficonnectProvider.removeListener(t,e),this}setupProviderEvent(){this.eventCallbacks.forEach(t=>{var e;null!=(e=this.deficonnectProvider)&&e.on&&this.deficonnectProvider.on(t.event,t.listener)})}async getProvider(){return this.deficonnectProvider||(this.deficonnectProvider=await async function(e=0){return new Promise(n=>{!function r(){var o,i;t(window.deficonnectProvider)?n(window.deficonnectProvider):null!=(o=navigator)&&null!=(i=o.userAgent)&&i.includes("DeFiWallet")&&window.ethereum?n(window.ethereum):e>0?setTimeout(async function(){--e,r()},50):n(void 0)}()})}(10),this.deficonnectProvider&&this.setupProviderEvent()),this.deficonnectProvider}get chainId(){var t,e;return null!=(t=null==(e=this.deficonnectProvider)?void 0:e.chainId)?t:"0x1"}get networkVersion(){var t,e;return null!=(t=null==(e=this.deficonnectProvider)?void 0:e.networkVersion)?t:"1"}get accounts(){var t,e;return null!=(t=null==(e=this.deficonnectProvider)?void 0:e.accounts)?t:[]}get chainType(){var t,e;return null!=(t=null==(e=this.deficonnectProvider)?void 0:e.chainType)?t:"eth"}async connectEagerly(t){t&&(this.networkConfig=t);const e=await this.getProvider();if(!e)throw new jo(4100,"can not find deficonnect provider");return e.connectEagerly?e.connectEagerly(this.networkConfig):e.request({method:"eth_accounts",params:[]})}async connect(t){t&&(this.networkConfig=t);const e=await this.getProvider();if(!e)throw this.installExtensionModal.open({networkConfig:this.networkConfig}),new jo(4100,"can not find deficonnect provider");return"function"!=typeof e.connect?e.request({method:"eth_requestAccounts",params:[]}):e.connect(this.networkConfig)}async enable(t){t&&(this.networkConfig=t);const e=await this.getProvider();if(!e)throw this.installExtensionModal.open({networkConfig:this.networkConfig}),new jo(4100,"can not find deficonnect provider");return"function"!=typeof e.enable?e.request({method:"eth_requestAccounts",params:[]}):e.enable(this.networkConfig)}async close(){var t;const e=await this.getProvider();return null==e||null==(t=e.close)?void 0:t.call(e)}get connected(){return this.accounts.length>0}async request(t){const e=await this.getProvider();if(!e)throw new jo(4100,"can not find deficonnect provider");return e.request(t)}async sendAsync(t,e){const n=await this.getProvider();if(!n)throw new jo(4100,"can not find deficonnect provider");if("function"!=typeof n.sendAsync)throw new jo(4100,"function not support");return n.sendAsync(t,e)}async send(t){const e=await this.getProvider();if(!e)throw new jo(4100,"wallet not connected");if("function"!=typeof e.send)throw new jo(4100,"function not support");return e.send(t)}}export{So as DeFiConnectProvider};
//# sourceMappingURL=index.modern.js.map
